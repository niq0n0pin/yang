name: Auto Backup Nodes and Trackers

on:
  schedule:
    # 指定 cron 表达式，UTC 时间。下面是从 00:15 开始，每4小时运行一次。
    - cron: '15 */4 * * *'
  # 可选：允许手动触发此工作流（在GitHub仓库页面的Actions标签页中点击按钮运行）
  workflow_dispatch:

jobs:
  backup:
    runs-on: ubuntu-latest # 使用GitHub提供的Linux虚拟机[citation:9]

    steps:
      - name: Call Vercel Backup API
        run: |
          curl -X POST \
            https://yang-eight-sigma.vercel.app/api/cron-backup \
            -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}" \
            -H "Content-Type: application/json"
